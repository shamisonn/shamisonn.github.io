---
layout: default
title: 過去に書いたlinuxのススメ
mode: post
---

執筆時は2016年4月で、学内用に書いたやつをここに載っけるアレ
<!--readmore-->
# Linuxのすゝめ

鯖じゃなくてデスクトップ用途でLinuxを使おうのやつ．
パソコンって何？OSってなんですか？という方には辛い記事ですのでご注意を．

# 始めに
Linux （リナックス）は，
「UnixライクなOSカーネルであるLinuxカーネル，
およびそれをカーネルとして周辺を整備したシステムのこと」である．

本記事では「Linuxについて」と，
デスクトップ用途での，
Linuxを使うことで円滑な開発ライフを送ること」についてまとめていく．

読者の中にLinuxディストリユーザの人間がどれだけいるのかわからないが，
UnixないしUnixライクなシステムにはハッカーが住んでいるので，
ハッカーの住居にｺﾝｺﾝとノックしてもしもーしと入っていきたい．

最初にLinuxは「UnixライクなOSカーネル」と述べたが，
まずはカーネルついてざっくり見ていこう．
 
# Linuxカーネルとはなんぞや

私は「カーネル」と聞いたときはﾎﾟﾝｯ頭に浮かんだのはロックマンエグゼであったが，
ここでいうカーネルはそれとは違う．
 
「カーネル」を端的に表すとOSの「心臓」であり，「コア」であり，「核」である．
カーネルのがやることの中には，以下のものがある．
 
- 「デバイスの管理」 
	- デバイスドライバでハードウェアの入出力を制御する．
	カーネルがこれを行うことで，ハードウェアが抽象化され，
	ソフトウェア側から触りやすくなっている．        
- 「プロセスの管理」
	- プロセスが一度に利用できるCPUは一つであるため，
	特定のプロセスがCPUを専有しないように，また，
	効率よくプロセスが働くように管理している．
	各プロセスには，「PID」というIDが割り振られており，
	Unix系のOSでは`ps`コマンドでプロセスの様子を観察できる．
	アリの巣を観察する感覚で`ps aux`とやってみると良い．
- 「メモリの管理」
  - プログラムを実行する際には，実行する場所が必要だが，その場所となるのがメモリだ．
	実行中のプログラムはシステムからは「プロセス」と見なされ，
	様々なお仕事をこなしていく．カーネルは，
	様々なプロセスがお仕事をしていく過程で，
	各プロセスの仕事場（メモリ）の配分を管理しているのだ．
- 「システムコールの提供」
	- システムコールというのは，OSのカーネルが可能なものを，
	OSを使っているユーザのプログラムから使えるようにする仕組みのことだ．
	例えば，C言語で`printf`関数を使うときは，
	システムコールの`write`関数を用いて実現している，という具合だ．
	個人的にAPI的なものだと解釈している．

以上からざっくりまとめると，
カーネルというのは
「パソコン上でのプログラムの快適な動作のために，
ハードウェアの抽象化と，その管理をしているもの」
という感じだろうか．

## UnixライクなOSカーネルLinux

少々脱線するがよく間違えられるのでここに記述する．
  
再帰的頭字語として「Linux - Linux is not Unix」
が挙げられるLinuxはUnixではない．
そもそも，Unixとは1969年にベル研究所のKen Thompson，
Dennis Ritchieらが作ったOSのことであり，
Linuxとは別物である．

ではLinuxとは何なのか，という疑問が湧くが，
Linuxとは，
まだ当時学生であった「Linus Torvalds（リーナス・トーバルズ）」という１大学生が，
勉強のために自分で実装した，Unix「っぽい」OSのことである．
 
言ってしまえば，
普通に触る分にはUnixもLinuxも殆ど変わらないが，
違うものだ，ということは分かっておくと良いかもしれない．

## Linuxディストリビューションとは

Linuxは「カーネル」と「Linuxをカーネルとして周辺を整備したシステム」とあるが，
前者を「Linuxカーネル」，
後者はしばしば「Linuxディストリビューション」と呼ばれる．
  
ディストリビューション（distribution）の意味は「流通・分布」を意味しており，
Linuxカーネルを含み，
設定済みで実行可能の様々なソフトウェア群（コンパイラ，
ブラウザ，エディタなど）によって，
構成されたOSのことをLinuxディストリビューションと呼ばれ，
具体的には「Ubuntu」や「CentOS」などがある．
  
また，Linuxディストリの人気なものには，
大きく分けて，
「Debian系」と「RedHat系」と「Slackware系」があり，
独立したディストリを含め，各系列には以下のようなものがある．

- Debian系
  - Debian GNU/Linux
  - Ubuntu
  - Steam OS
  
- RedHat系  
  - Fedora
  - Red Hat Enterprise Linux
  - CentOS

- Slockware系
  - openSUSE
  - Slackware
- その他独立系 
  - Arch Linux
  - Gentoo Linux
  
もちろんこれは全てではないため，
読者各位には，
ぜひ自分の好きなディストリを見つけていただきたい．
始めるのにオススメなものは「Ubuntu」であり，
ある程度Ubuntu等を触った各位には「Arch Linux」を勧めたい．

# で，何がいいの？

Linuxを使うと何が良いのか，と言う点を上げていく

- カスタマイズ性が高い
- 基本的に無料
- プログラミングの環境設定が簡単になる
- シェルが強力
- etc...

一つずつ見ていく．

## 異常なまでのカスタマイズ性

狂気を感じるほどにカスタマイズ性が高い．
読者はどんなLinux PCを運用する際に，
無限の構成ができる．
  
Windowsのデスクトップ画面のような，
スタートボタンのあるデスクトップ（Window Manager）を採用することも可能であり，
MacのDock的なものを追加することもできれば，
マウスを殆ど使わず，キーボードからの操作で完結するものにカスタマイズもできる．
最初のログイン画面をリッチにすることもできるし，
UIがしょっぱくなるが，動作がとても軽いものを採用，
などなど．

各々のPCに一番合うものを試行錯誤して，
各々の趣味趣向宗教にあう自分だけのPCを作ることができるのだ．

## 人生と一緒で無料

全てが無料という訳ではないが，無料のものが多い．
UbuntuもCentOSも無料だ．
じゃあどうやって開発しているの？という疑問がある．

これは基本的にLinux好きな開発者たちの愛によって開発が勧められてる，
と言っていいだろう．つまりはボランティアだ．
開発者は基本的に普段の仕事のあいまで，そして趣味でLinuxやそのディストリの開発を行っている．
  
また無料であることも相まって，
容易にOSS（オープンソースソフトウェア）として開発できることから，
誰もが開発者側に周りやすい仕組みができているという点でも良いだろう．
  
かといって有料のLinuxもある．有料で有名なのはRed Hat Enterprise Linuxだろうが，
商用サポートという強いサポートが受けられるのが有料の最大の利点だろうか．

## プログラミングが簡単？

基本的にLinuxディストリには「パッケージマネージャ」がついている．
このパッケージマネージャがディストリに付属していることで，
環境設定が非常に容易になっている要因として挙げられる．

例えば，
「Ubuntu入ったのPCで，
エディタをEmacsで，
Python3を使ってなんか作りたいなぁ．
開発するときはGitでバージョン管理したいしうーん」
とよくある状況が発生した際には，
環境は以下のコマンドを叩けばおしまいである．

```
$ sudo apt-get install emacs python3 git
```

あら簡単．

Debian系では「apt-get」や「aptitude」，
RedHat系では「yum」，
Arch Linuxでは「pacman」「yaourt」などなど，
様々であるが，
コマンド叩き方の違いこそあれど，
機能としては違いはほぼ無い．
様々なパッケージをサクッとインストールして，
さっさと環境構築を終わらせたい怠惰なハッカーにはピッタリだ．

## シェル

Linuxにはシェルというものがあり，
これはOSを取り囲む外殻のようなものである．
ユーザはターミナルエミュレータを介して，
シェルにコマンドを渡し，
様々なプログラムを走らせることができる．

例えば，`ls`コマンドを使えば，
今いるディレクトリの中身を見ることが出来たり，
`cd`コマンドでディレクトリを移動，
`less`コマンドでファイルの中身をチラ見したできる．

「別にターミナルエミュレータ使わなくて良くない？」
と思う読者もいると思うが，これで終わりではない．
シェルで実行できるコマンドは「パイプ」でつなげて組み合わせることができるのだ．

例えば「.mdの拡張子のファイルがどれだけあるか見たいと言うとき」は，
`ls`コマンドと`grep`を組み合わせて，
```
$ ls -la | grep *.md
```
でおしまいである．すごい．

ユーザが触る際は，
基本的にターミナルエミュレータ
（UbuntuではGnome Terminalを使うのが良いだろう）
を通してコマンドを叩いていくことになる．
ターミナルエミュレータにも様々であり，
こだわってみると面白い．
  
ディストリのデフォルトのUnixシェル（Unix系システムで使われる，
シェルコマンドを解釈できる，
コマンドラインインタプリタの意味）として有名なものが「Bash」と呼ばれるもので，
Linux界のデファクトスタンダードとなっている．
が，もちろん他のUnixシェルもあり，
「zsh」や，「fish」などもあるのでグーグル先生に聞いてみると良いだろう．

# インストール？

実際にUbuntuインストールの手順を記述しようかと考えたが，
冗長な記事になりそう（本音はめんどい）と思ったので，
インストールする際のTipsをまとめておこうと思う．

ぶっちゃけ，
この記事をここまで読んで初めてLinuxを入れるって人は少ないだろうが，
つらつらと記しておこう．

## インストールの準備

Unix系ユーザ各位は`dd`コマンドを使えばいいが，
Windowsユーザ各位にはLiveCD（or LiveUSB）
を作るだけでも少々面倒な部分があると思う．

Windowsユーザにはぜひ
「[Rufus](https://rufus.akeo.ie/)」を勧めたい．
 
詳しくはググって補完していただきたいが，
他のインストール用ツールに比べ，
冗長な部分が少なく必要最低限でまとまっており，
インストールしたいディストリのISOさえ取ってきてしまえば，
容易にLiveCD等を作れるのでオススメである．

また，インストールの際は出来るだけUEFIブートでインストールするほうが，
PCの起動が早くなるので，
できる限りはUEFIブートのほうが良いと思われる．
  
## パーティションの切り方と切った後

基本的にはデュアルブートする人の悩みとなるだろうが，
切る際には`cgdisk`が役に立つだろう．
また，GUI環境があるのなら`gparted`もオススメだ．
Windowsユーザ各位は，Windowsで予め切っておく等もできる．

また，切る際に気をつけておきたいのが，
「MBR（Master Boot Record）形式」で切るのか，
「GPT（GUID Partition Table）」で切るのかという点である．

基本的に2016年現在ではGPT形式で切るのが主流であるが，
これはブートローダに左右されるので，
UEFIブートならGPT，
BIOSブートならMBR，のようにするのが安定だろうか．
  
また，パーティションを切ったあとは，
どのファイルシステムにフォーマットすれば良いかの知見が必要となるだろう．
個人的な主観が大いに入っているが，
さらっとファイルシステムについて眺めてみよう．


|ファイルシステム | 説明 |
|:---:|:----|
| ext4 | 大体はこのファイルシステムが使われているイメージがある． ext2から派生してきたGNU/Linuxのファイルシステムだ． |
| swap | スワップ領域において使われる． 自分のPCのメモリ量に不安があれば作成しても良いだろう．|
| vfat  | UEFIブートの際よくBootパーティションにおいて使われる． このファイルシステムは事実上の全てのOSでサポートされているようで， Bootパーティションに使われるのもそれが要因だろうか．|
| NTFS | Windowsにおける基本的なファイルシステム． Linuxで扱えないという訳ではないが， Linuxのファイルシステムであれば選択する必要は無いだろう．|
| btrfs | 「Better FS」という名をもち， 現在不安定ながらも， 将来GNU/Linux標準のファイルシステムになるのではないか， と期待されているファイルシステムである．|

なお，私は「UEFIブートでGPTでパーティションを分けて，
`/`にext4，`/boot`にvfat」という構成をしている．
今度暇なときにルートをbtrfsにしてみようかと思う．
なお，グーグル先生に聞いたところ，
`/home`とかを他のパーティションに分ける人とかもいるようである．
利点等はぶっちゃけよくわからないが，
やる人がいるということは何かしらの利点があるんだろうと思う．
（各位で調べて頂きたい）

# あなたのLinuxに

Linuxをインストールした人も， してない人も，
Linuxで使われるソフト群について記述するので，
目を通してみて頂きたい．

## ブラウザ

主に使われるブラウザについて紹介する．
### Firefox
言わずと知れたMozilla社の燃え盛る狐さん．執筆時現在私はFirefox派である．
現在私は比較的低スペックのPCを使っているが，
低スペックPCでも比較的快適に動くため，
良いと思われる．

また，マウス操作に飽きたらVimperatorというFirefoxの操作をvim化して，
マウス操作いらずにするということもできるのでやってみると面白い．

なお，Emacs化についてはKeySnailというものがあるが，
動作が安定しないイメージがあるので，
インストールの際は調査が必要だろう．

### Google Chrome（Chromium）
いつもお世話になっているあのGoogle先生が作ったブラウザ．
プロセス欄が大量にChromeまみれになることでも有名．
低スペPCでなければ動作等は気になる範囲ではないし，
ちょっとしたプラグイン等では優秀なものが多いので，
その点ではこちらのほうが好きである．

だが，Linux機の低スペックPCでは少々重いかなーと感じているが，
どうだろうか．
Vim化もできるようなので，
UIを除いて考えると，
FireFoxとそこまで大きな違いは無いだろう．

### luakit
Lua言語で作られた軽量ブラウザ．
起動こそ少々時間がかかるものの，
操作はデフォルトでVimバインドになっており，
UIがシンプルで余計なものがあまりないのが良い．

が，メンテナンス頻繁にされていないという致命的な欠点を抱えているので，
使っていくには少々悲しみと妥協が必要か．

UIが個人的に一番シンプルで感動したのでここで紹介しておく．

## ツイッタークライアント
日々の生活に欠かせない（？）Twitterクライアントの紹介．
### TweetDeck
言わずとしれた公式製のあいつ．
ブラウザからも使えるし，
Chromiumエンジンのやつもあった記憶がある．
私は，ブラウザから利用しているが，
これよりいいものがあまり思いつかないので，
王道としておいておく．

### Mikutter
OSSで超有名！可愛いRuby製のTwitterクライアントMikutterちゃん．
名前からオタク感漂っているかも知れないが，
Twitterにいる人は大体オタクなので，むしろこれが良いのだ．
（ミクちゃんかわいいすき）

特徴的なことは，OSSのクライアントなので，
サクッとソースコードを見ることができるという点と，
超簡単にMikutterプラグインが作れるという点だろうか．（要Rubyスキル）
また，開発者の方々のTwitterは眺めているだけで面白いので要チェックである．
  
もちろんであるが，クライアントとしても優秀で，
ストリーミング対応はもちろん，動作も軽いので，
TweetDeckに不満があったり，
軽いクライアントを使いたい各位は使うと良いのでは無いだろうか．

### tw
CLI（コマンドライン）アプリケーションとなっていて，
Ruby gem経由で入る超々軽量Twitterクライアントとなるものである．
といっても，Twitterに張り付くためのものではなく，
streamでずらーっと眺めたり，
ちょっとしたことをターミナルからつぶやきたいというときに使う，
という用途が最適なクライアントである．
インストールもgemからなので簡単なので良い．

ターミナルの画面分割が可能となる「tmux」
と組み合わせて使うのが個人的にオススメである．
  
## エディタ
パソコンで文字を書くにはみなさんつかわれるエディタ．戦争ダメゼッタイ．

### Emacs
かのリチャード・ストールマンが作り出した最高峰のエディタEmacs．
CtrlとMeta（Alt）を華麗に使いこなしていく様子はまさに「小指の魔術師」．
Ctrl-Hを削除コマンドに割り当てるのがオススメだ．
elispを用いたエディタの拡張はまさにS式の真髄．
甘美なるエディタ拡張に精を出しすぎて目的を忘れる人間が後を立たない．
### Vim
古来から信じられてきたエディタVIの拡張VIM．
あらゆるモードを瞬時に切り替えて文書を編集していく様はまさに「モードの貴公子」．
ノーマルモードでのオペレータとモーションの組み合わせは無限大．
vimscriptをマスターし暗黒美無王に謁見を願おう．
### gedit
みんな大好きLinuxのメモ帳的存在gedit．
コードハイライトもタブサイズ指定等もあるから，
Windowsのメモ帳とは比べるまでもない．
汎用的で便利であるのでおすすめではある．

### Atom
汎用エディタのAtom．
Electron製ということで少々の動作の重みは抱えているものの，
中身はデフォルトで大体全部入っているので初心者に優しくなっている．
デフォルトで自動補完や，スニペットがあるので，
何も設定しなくても大体問題ないのが本当に良い点．

## Xウィンドウマネージャ
サーバ用途ではなく，
デスクトップ用途で使われるLinux PCには，
「X Window System」と呼ばれるシステムを用いて，
様々なデスクトップ環境を提供している．
そのシステムの中で動作するXにおけるデスクトップの部分である，
ウィンドウマネージャを紹介していく
### GNOME
あのLinus Torvaldsが使っている，
とされるウィンドウマネージャ（以下WM）としても有名なGNOME．
Windowsの操作と比べれば多少の違いはあれど，
Linux PCを使う上で，なに不自由の無い環境がそこにはある．

GNOMEではWMのみのサポートではなく，
GNOME Projectとして，WMの他にも，ファイラー，
ターミナルエミュレータなどの様々なアプリの開発を行っており，
全ての操作をGNOMEのアプリケーションで行える．

GNOMEは全体的に「無難なWM」と言える．
困ったらGNOMEを入れれば良いだろう．

### Cinnamon
先ほどのGNOMEを若干リッチにして，
WindowsっぽいUIにしたのがCinnamon．
Linux Mintと呼ばれる，
Ubuntuを参考に作られたディストリの標準WMの一つだ．

左下にはスタートメニューがあり，
そこからアプリケーションを起動する感じはWindowsを思わせる．
UIがリッチになった分少々重くはなるが，
使いやすさは間違いないだろう．

### Awesome
タイル型と呼ばれる玄人向けのWMの中でも，
一番設定が簡単（？）なWMであるAwesome．
  
特に設定をしなくとも簡単に動き，
タイル型WMの強みである
「マウス触ること無くキーボードで全ての操作ができる」
という利点を得ることができる．

また，Awesomeの設定はLuaで書く形となるので，
時刻表示，バッテリ表示等々の拡張をする際は，
自力でも，グーグル先生と一緒にでも，
Luaを書く必要があるので注意が必要である．
  
## ターミナルエミュレータ
みんな大好きターミナルのあれこれ．
ぶっちゃけ明確な違いはわからないので，
主観ではあるがざっくりレビューするという形で紹介する．
### GNOME-terminal
ウィンドウマネージャであるGNOMEに，
デフォルトで付属しているターミナルエミュレータ．
ユーザビリティが高く，比較的簡単に扱うことができる．
  
特にエディタ等で設定項目を弄らずとも，
マウスでクリックしてポチポチやっていくだけで，
ざっくり設定できるという点もあるので初心者にもオススメであり，
もちろんいじろうと思えばいくらでもいじり倒せるので，
万人にオススメである．
  
### xterm
X Window System用の標準のターミナル．
設定無しのデフォルトのままでは使いにくいので，
ある程度の設定は必須かと思われる．
しかし，標準のターミナルとあってか，
先のGNOME Terminalよりも動作が軽いのが利点と言えるだろうか．
  
また，
xtermは設定は，
通常`.Xresources`というファイルに書き込むことで行うので，
お気に入りのエディタでカキカキしていくと良いだろう．
  
### URxvt}
`rxvt`というターミナルのUnicode対応版ということで，
URxvtという名を冠している．
軽量ターミナルとして有名であり，
設定は先にxtermと同様に`.Xresources`に書いていく感じになる．
  
## ファイラー
Windowsではエクスプローラ，MacではFinderが担っている機能が，
ファイラーの成すべき機能である．
Linux PCでは自分好みのファイラーを選択して頂きたい．

### Nautilus
GNOME標準のファイラー．
  
GNOMEのアプリ群と操作が似ており，
また直感的に操作できる点でやはり無難なファイラーであると言える．

### Nemo
Nautilusのフォークとして使われ，
Linux Mint標準のファイラーとされるのがNemo．
  
Nautilusとは基本的に変わりはないが，
ファイラー内で右クリックで「端末で開く」
という選択肢が出るところがポイントが高い．

## IME，変換メソッド
日本人なら日本語入力が必須なので紹介する．

IMEは「ibus」と「fcitx」などがあり，
また，変換メソッドは「Anthy」と「Mozc（Google日本語入力の派生）」などがある．

ぶっちゃけどれが良いのか，というのはわからないが，
個人的な主観（つまりは経験）で言うと，
「fcitx」と「mozc」を組み合わせたものが一番かなぁと行った感じだ．
 
他にも「uim」や「scim」等の他のIMEもあったりするので，
こればっかりは読者に試して頂きたい．

# For Linux Users
ここからはLinuxを日々利用している読者らに，
中・上級者向けのディストリの紹介をしていく．
 
## Arch Linux
今回紹介するのはArch Linuxというディストリだ．
特徴的であるのは，
他のディストリとはインストール方式が異なり，
「GUIでのインストールではなくCUIでのインストールとなる点」と，
それにより「ミニマルなパッケージ構成が可能になるという点」という点だ．
 
Archには「The Arch Way」という哲学があり，そこには以下5つの言葉がある．

1. シンプルであること．
1. 便利であることよりも正確なコードであること．
1. ユーザ中心であること．
1. オープンであること．
1. 自由であること．

 
この5つの言葉は
KISS（Keep It Simple, Stupid; シンプルにしておけよ，バカチンが）」
という言葉に集約されており，
Archのユーザは無駄の無い最小の構成でLinuxを扱うことができるのだ．
 
ここにインストールを手順を書いても良いが，
公式のドキュメント[Beginners' guide - ArchWiki](https://wiki.archlinux.org/index.php/Beginners'_guide)があまりにも優秀なため割愛する．
 
また，Arch LinuxのWikiであるArchWikiでは，
Linuxをハックするための大量の知見があるので，
チェックしてみると良いだろう．
（Linuxのソフトウェアで詰まったときは，大抵ArchWikiにたどり着くほどである）

# Gentoo Linux
Linuxカーネルに興味を持った人は，
このディストリで存分にカーネルコンパイルをすると良いだろう．
Gentooの基本的なイメージとしては挙げられるのは，良くも悪くも「自由」という点だ．

それは（このディストリの最大の特徴として挙げられるが）
「使いたいソフトウェアがあった際は，
そのソフトウェアのソースコードを取ってきて，
基本的にコンパイルしてから，インストールをする」と言う点である．

他のOSであればパッケージマネージャが，
「実行形式のプログラムをインストールする」という形だが，
Gentooでは，Portageというパッケージ管理システムを採用しており，
「ソフトのソースを取ってきてコンパイルしてインストールする」という形なのだ．

これによりGentooは多様な環境で動作することを保証している．
プログラムが動かないなら，コンパイルすればイイじゃない！という感じだろうか．

また，ソースからプログラムをインストールすることで，
そのハードに最適なバイナリコードを生成できるので，
確実に動作早いだろう．
 
しかし，これはハードにもよるが，
コンパイルというのはものによっては大量の時間がかかる．
CLIアプリケーションだけ入れるのなら良いが，
XやOffice等のGUIアプリケーションを利用をしようとしたら，
場合によっては，
１日がコンパイルだけで終わってしまう，
ということも無い話ではない．
良くも悪くも，「コンパイル」がGentooには必要なのだ．
 
（もちろんデスクトップ用途のGentooを構築するのも良いものだ．
個人の感想であるが，Gentooの動作は全体的に早い．
Xの起動も早いし，動作も軽快だ）

どのようなGentooを作るのも， 
ユーザに委ねれられているが，
サーバ用途や，勉強用途など，
明確な目的をもってGentooを使うと良いのではないのだろうか．
 
# おわりに
これまでLinuxとデスクトップ用途でのLinux PCについて記述したが，
これらに関してはLinuxについてのほんの一部でしかない．
興味をもった読者にはぜひその魅力を身をもって味わって，
その深みにはまって頂きたいと思うところである．
 
拙い文書，また無作法な部分があったかもしれないが，
これまで読んで頂き感謝感激雨霰である．

